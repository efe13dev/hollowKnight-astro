---
export interface Props {
  active: boolean;
}
const { active } = Astro.props as Props;
---

<div
  id="shadow-modal"
  class={`modal fixed inset-0 z-[2000] flex items-center justify-center bg-[rgba(10,10,20,0.85)] transition-opacity duration-700 ${active ? "active opacity-100 pointer-events-auto" : "opacity-0 pointer-events-none"}`}
>

  <div
    class="modal-content bg-[var(--background-light)] rounded-2xl max-w-md w-full p-10 relative shadow-2xl text-white opacity-100 transform-none filter-none transition-all"
  >
    <span
      id="close-shadow-modal"
      class="close-modal absolute top-3 right-5 text-3xl text-[var(--accent-color)] cursor-pointer hover:text-white transition-colors"
      >&times;</span
    >
    <h2 class="text-xl font-bold mb-4 text-center">
      ¿Qué ocurre cuando pierdes todas tus máscaras?
    </h2>
    <p class="mb-4 text-center">
      Cuando el Caballero pierde todas sus máscaras, muere y deja atrás una
      "Sombra" en el lugar donde fue derrotado. Esta sombra contiene toda la Geo
      (moneda) que llevabas y parte de tu alma máxima se ve reducida. Para
      recuperar tu Geo y tu alma completa, debes regresar al lugar donde caíste
      y derrotar a tu propia sombra. Si mueres de nuevo antes de recuperar la
      sombra, perderás permanentemente toda la Geo que llevaba tu sombra
      anterior.
    </p>
    <p class="text-center mt-6">
      <img
        src="/img/shadow.png"
        alt="Sombra Hollow Knight"
        class="max-w-[120px] mx-auto opacity-80"
      />
    </p>
  </div>
</div>

<script>
  // Cierra el modal cuando se hace click fuera del contenido o en la X
  document.getElementById('shadow-modal')?.addEventListener('click', function(e) {
    const target = e.target as HTMLElement | null;
    if (target && target.id === 'shadow-modal') {
      window.dispatchEvent(new CustomEvent('closeShadowModal'));
    }
  });
  document.getElementById('close-shadow-modal')?.addEventListener('click', function() {
    window.dispatchEvent(new CustomEvent('closeShadowModal'));
  });
</script>
